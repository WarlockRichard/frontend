<form #elementForm="ngForm"
      [ngSwitch]="requireValue(element.kind)">

  <div class="form-group row"
       [ngClass]="{'has-success': captionElement.valid, 'has-danger': !captionElement.valid && captionElement.touched }">

    <label for="captionElement" class="col-form-label col-4  required">{{ 'T_FORM_CAPTION' | translate }}</label>
    <div class="col-8">
      <input type="text"
             class="form-control"
             id="captionElement"
             name="captionElement"
             #captionElement="ngModel"
             required
             placeholder="{{ 'T_FORM_ENTER_CAPTION' | translate }}"
             [(ngModel)]="element.caption">

      <div class="form-errors"
           *ngIf="captionElement.errors && captionElement.touched">
        <div class="form-control-feedback" *ngIf="captionElement.errors['required']">{{ 'T_FORM_FIELD_IS_REQUIRED' | translate }}</div>
      </div>
    </div>
  </div>


  <!-- Values are not required -->
  <ng-template ngSwitchDefault>
    <div class="row checkbox mb-1">
      <label class="col-form-label col-4 " for="required{{ i }}">{{ 'T_FORM_REQUIRED' | translate}}</label>
      <div class="col-8">
        <label class="switch switch-icon switch-primary">
          <input type="checkbox"
                 id="required{{ i }}"
                 name="required{{ i }}"
                 class="switch-input" [(ngModel)]="element.required" checked="true">
          <span class="switch-label" data-on="*"></span>
          <span class="switch-handle"></span>
        </label>
      </div>
    </div>
  </ng-template>

  <!-- Values are required -->
  <ng-template [ngSwitchCase]="true">
    <h6 class="mt-2">{{ 'T_FORM_ADD_NEW_VALUE' | translate }}</h6>
    <hr/>
    <form #addNewValueForm="ngForm">
      <div class="form-group row mb-1">
        <label class="col-form-label col-4 " for="valueCaption{{ i }}">{{ 'T_FORM_CAPTION' | translate}}</label>
        <div class="col-8">
          <input #newCaption
                 id="valueCaption{{ i }}"
                 name="valueCaption{{ i }}"
                 type="text"
                 class="form-control"
                 ngModel
                 required>
        </div>
      </div>
      <div class="form-group row mb-1">
        <label class="col-form-label col-4 " for="valueValue{{ i }}">{{ 'T_FORM_VALUE' | translate }}</label>
        <div class="col-8">
          <input #newValue
                 id="valueValue{{ i }}"
                 name="valueValue{{ i }}"
                 type="text"
                 class="form-control"
                 ngModel
                 required>
        </div>
      </div>
      <div class="text-right">
        <button type="button" class="btn btn-sm btn-success"
                [disabled]="!addNewValueForm.valid"
                (click)="addValue(element, newCaption.value, newValue.value); addNewValueForm.reset();">
          <i class="icon-plus"></i> {{ 'T_ACTION_ADD' | translate }}
        </button>
      </div>
    </form>

    <div class="row">
      <table class="table table-striped mt-2">
        <th>{{ 'T_FORM_CAPTION' | translate}}</th>
        <th>{{ 'T_FORM_VALUE' | translate}}</th>
        <th>{{ 'T_ACTION' | translate }}</th>
        <tbody>
          <tr *ngFor="let value of element.values">
            <td>{{ value.caption }}</td>
            <td>{{ value.value }}</td>
            <td>
              <button type="button"
                      class="btn btn-danger btn-sm"
                      (click)="deleteValue(element, value)">
                {{ 'T_ACTION_DELETE' | translate }}
              </button>
            </td>
          </tr>
          <tr *ngIf="!element.values.length">
            <td colspan="25" class="text-center">{{ 'T_EMPTY' | translate }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="row"
         *ngIf="!element.values.length">
      <div class="col-12 alert alert-danger">
        {{ 'T_FORM_VALUES_ARE_REQUIRED' | translate }}
      </div>
    </div>

  </ng-template>
</form>
